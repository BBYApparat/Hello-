<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.cdnfonts.com/css/ds-digital" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
      }
    }
  </script>
  <title>Screen</title>
  <style>
    body {
      font-family: 'DS-Digital';
    }
  </style>
</head>

<body>
  <div class="absolute pointer-events-none inset-0 z-10 opacity-100 mix-blend-overlay overflow-hidden">
    <img src="./texture_33.jpg" alt="">
  </div>
  <div class="flex h-full absolute inset-0 bg-[#a6ad6f] overflow-hidden">
    <div class="text-6xl m-3" style="transform: rotateY(180deg)">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1200 1200">
        <rect width="1200" height="1200" fill="none" />
        <path fill="currentColor" d="M960 1200V0h240v1200zM640 300h240v900H640zM320 600h240v600H320zM0 900h240v300H0z" />
      </svg>
    </div>
    <div class="text-6xl m-3">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
        <rect width="24" height="24" fill="none" />
        <path fill="currentColor" d="M19 8v3h3v3h-3v3h-3v-3h-3v-3h3V8zM5 10.5h3v-6h3v15H8v-6H5v6H2v-15h3z" />
      </svg>
    </div>
    <div class="text-[10rem] font-black m-3 absolute m-auto w-fit h-fit inset-0" style="text-shadow: 0 0 5px #000000, 0 0 55px #00000054;">
      <input type="text" class="bg-transparent text-center text-[10rem] font-black w-full h-fit placeholder:text-[black] placeholder:opacity-50" placeholder="88.8">
    </div>
    <div class="ml-auto rotate-270 text-6xl m-2.5">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">
        <rect width="512" height="512" fill="none" />
        <path fill="currentColor"
          d="M201 16c-15 0-20 3.38-20 20v15h-45c-29.547 0-35 5.453-35 35v375c0 29.547 5.453 35 35 35h240c29.547 0 35-5.453 35-35V86c0-29.547-5.453-35-35-35h-45V36c0-16.62-5-20-20-20zm-48.094 69.813c4.666.02 10.594.187 18.094.187h170c40 0 35-5 35 35v305c0 40 5 35-35 35H171c-40 0-35 5-35-35V121c0-32.5-3.31-35.283 16.906-35.188zM161 101c-5.54 0-10 4.46-10 10v55c0 5.54 4.46 10 10 10h190c5.54 0 10-4.46 10-10v-55c0-5.54-4.46-10-10-10zm0 90c-5.54 0-10 4.46-10 10v55c0 5.54 4.46 10 10 10h190c5.54 0 10-4.46 10-10v-55c0-5.54-4.46-10-10-10zm0 90c-5.54 0-10 4.46-10 10v55c0 5.54 4.46 10 10 10h190c5.54 0 10-4.46 10-10v-55c0-5.54-4.46-10-10-10zm0 90c-5.54 0-10 4.46-10 10v55c0 5.54 4.46 10 10 10h190c5.54 0 10-4.46 10-10v-55c0-5.54-4.46-10-10-10z" />
      </svg>
    </div>
  </div>

  <script>
    const input = document.querySelector('input');
    let currentValue = '';
    let decimalCount = 0;
    let isIntegerFocus = true;

    window.addEventListener('message', (e) => {
      const { action, data } = e.data;

      if (action === 'input') {
        if (isIntegerFocus) {
          if (currentValue.replace('.', '').length < 4) {
            if (currentValue === '0' || currentValue === '') {
              currentValue = data;
            } else {
              currentValue += data;
            }
          }

          const numValue = parseFloat(currentValue);
          if (numValue > 1000) {
            currentValue = '1000';
          }
        } else {
          if (decimalCount < 2) {
            if (currentValue.indexOf('.') === -1) {
              currentValue += '.' + data;
            } else {
              currentValue += data;
            }
            decimalCount++;
          }
        }
      }
      else if (action === 'clear') {
        currentValue = '';
        decimalCount = 0;
        isIntegerFocus = true;
      }

      else if (action === 'backspace') {
        console.log(currentValue);
        if (currentValue.length > 0) {
          if (currentValue.slice(-1) === '.') {
            currentValue = currentValue.slice(0, -1);
            decimalCount = 0;
            isIntegerFocus = true;
          } else {
            currentValue = currentValue.slice(0, -1);

            if (currentValue.indexOf('.') === -1) {
              decimalCount = 0;
              isIntegerFocus = true;
            }
          }
        }
      }

      else if (action === 'tab') {
        isIntegerFocus = !isIntegerFocus;
      }

      input.value = currentValue || '0';
      const valueNumber = parseFloat(currentValue) || 0;

      fetch('https://gfx-radio/updateInput', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ input: valueNumber }),
      });
    });

  </script>
</body>

</html>